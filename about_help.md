
# 系统概述

智能知识库系统（SmartKB）是一个基于AI的智能问答平台，集成了云端知识库、本地RAG（检索增强生成）和智能体工作流等多种技术，为用户提供全方位的智能对话和知识管理服务。

## 主要功能

### 1. 用户认证管理

- **多角色支持**：管理员（root）、教师、普通用户
- **双模式登录**：支持用户名或姓名登录
- **用户信息管理**：班级、姓名、性别等个人信息管理
- **权限控制**：不同角色拥有不同权限（管理员>教师>普通用户）

### 2. AI对话服务

- **云端知识库版**：基于DashScope云端服务的智能问答
- **本地知识库版**：基于本地RAG（检索增强生成）的智能问答
- **本地智能体版**：使用IV Agent Workflow处理复杂任务
- **多模态支持**：支持文本、图像、文档等多种输入方式

### 3. 文件处理能力

- **图像理解**：支持JPG、PNG、GIF等图像格式的智能识别和分析
- **文档处理**：支持PDF、Word、Excel、PowerPoint、TXT等多种文档格式
- **文件大小限制**：文档最大10MB，图像最大5MB
- **批量处理**：支持同时上传多个文件进行处理

### 4. 任务管理系统

- **任务创建**：管理员和教师可以创建任务
- **任务提交**：学生可以将对话内容提交到指定任务
- **智能筛选**：系统根据班级信息智能推荐相关任务
- **汇总管理**：支持教师和管理员查看任务提交情况

### 5. 对话历史管理

- **自动保存**：所有对话历史自动按日期分类保存
- **用户隔离**：不同用户的对话历史独立存储
- **文件浏览**：内置文件浏览器方便查看历史记录
- **HTML预览**：支持对话中生成的HTML代码预览

## 使用指南

### 登录系统

1. 在登录界面输入用户名或姓名
2. 输入密码（管理员root默认无密码）
3. 系统会显示用户信息和在线人数

### 开始对话

1. 在提示词框输入问题
2. 可选择上传文件（图像或文档）
3. 选择对话模式（云端/本地知识库/智能体）
4. 点击发送开始对话

### 任务管理

- **创建任务**：输入"提交[任务名]任务"创建新任务
- **提交任务**：输入"完成"或"结束"提交当前对话到任务
- **选择任务**：当有多个任务时，输入任务编号选择

### 文件操作

- **上传文件**：点击文件上传按钮，支持多文件同时上传
- **查看历史**：使用文件浏览器查看对话历史记录
- **HTML预览**：对话中生成的HTML内容可直接预览

## 权限说明

### 管理员（root）

- 用户注册和管理
- API KEY配置
- HTML文件管理
- 系统配置
- 所有任务查看

### 教师

- 创建教学任务
- 查看学生提交
- HTML文件管理
- 课程内容管理

### 普通用户

- 参与对话
- 提交任务
- 查看个人历史
- 修改个人信息

## 技术特性

### 安全机制

- 密码加密存储（bcrypt）
- 用户权限验证
- 文件上传安全检查
- 访问日志记录

### AI模型支持

- **Qwen3-Max**：主要对话模型
- **Qwen3-VL-Plus**：视觉理解模型
- **BGE-Large-ZH**：嵌入模型
- **Qwen-Long**：长文本处理模型

### 性能优化

- 流式输出：实时显示AI响应
- 异步处理：提高系统响应速度
- 会话管理：保持对话上下文
- 缓存机制：提升重复查询效率

## 常见问题

### Q: 无法登录怎么办？

A: 请确认用户名/姓名和密码正确，管理员root默认无密码

### Q: 文件上传失败？

A: 请检查文件大小是否超过限制（文档10MB，图像5MB）

### Q: 如何提交任务？

A: 输入"完成"或"结束"，系统会自动推荐相关任务

### Q: 对话历史保存在哪里？

A: 按用户独立保存在各自的ChatHistory目录中

## 联系支持

如需技术支持或功能咨询，请联系系统管理员。

---

*版本信息：基于AgentSmartKBXS.py构建*
*系统持续更新中，功能可能随时调整*
